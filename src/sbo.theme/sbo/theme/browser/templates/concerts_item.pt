<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  i18n:domain="sbo.theme"
  tal:omit-tag=""
>
  <body tal:omit-tag="" tal:define="
      site_properties context/portal_properties/site_properties;
      toLocalizedTime nocall:context/@@plone/toLocalizedTime;
      kssClassesView context/@@kss_field_decorator_view;
      getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
      templateId template/getId;
  ">

    <h1 tal:content="context/Title">
      Title
    </h1>

    <div class="eventDetails vcard">
      <table class="vertical listing"
          summary="Event details" i18n:attributes="summary">

        <tbody>
          <tr>
            <td>
              <tal:differentday tal:condition="python:not context.start().Date() == context.end().Date()"
                      i18n:translate="event_when_differentday">
                <abbr i18n:name="startdate"
                  metal:define-macro="startdate-field-view"
                  tal:define="kss_class python:getKssClasses('startDate',
                        templateId=templateId, macro='startdate-field-view');"
                  id="parent-fieldname-startDate"
                  tal:attributes="class string:$kss_class dtstart;
                          title python:context.start().ISO8601()">
                <span metal:define-slot="inside" class="explain">
                  <span tal:replace="python:toLocalizedTime(context.start())">Start Date</span>
                  <tal:word i18n:translate="event_when_differentday_optional_word_between_date_and_time" />
                  <span tal:replace="python:toLocalizedTime(context.start(), time_only=1)">Start Time</span>
                </span>
                </abbr>
                to
                <abbr i18n:name="enddate"
                  metal:define-macro="enddate-field-view"
                  tal:define="kss_class python:getKssClasses('endDate',
                        templateId=templateId, macro='enddate-field-view');"
                  id="parent-fieldname-endDate"
                  tal:attributes="class string:$kss_class dtend;
                          title python:context.end().ISO8601()">
                 <span metal:define-slot="inside" class="explain">
                   <span tal:replace="python:toLocalizedTime(context.end())">End Date</span>
                   <tal:word i18n:translate="event_when_differentday_optional_word_between_date_and_time" />
                   <span tal:replace="python:toLocalizedTime(context.end(), time_only=1)">End Time</span>
                </span>
                </abbr>
              </tal:differentday>

              <tal:sameday tal:condition="python:context.start().Date() == context.end().Date()"
                     tal:define="ampm
                     python:site_properties.getProperty('localLongTimeFormat').find('%p') >= 0"
                     i18n:translate="event_when_sameday">
                <span tal:replace="python:toLocalizedTime(context.start())"
                  i18n:name="date">
                  Start Date Time</span>
                from
                <abbr metal:define-macro="startdatesame-field-view"
                  tal:define="kss_class python:getKssClasses('startDate',
                        templateId=templateId, macro='startdatesame-field-view');"
                  id="parent-fieldname-startDate"
                  tal:attributes="class string:$kss_class dtstart;
                          title python:context.start().ISO8601()"
                  i18n:name="starttime">
                  <span metal:define-slot="inside"
                      class="explain"
                      tal:content="python:toLocalizedTime(context.start(), time_only=1)">Start Time</span>
                </abbr> to
                <abbr metal:define-macro="enddatesame-field-view"
                  tal:define="kss_class python:getKssClasses('endDate',
                        templateId=templateId, macro='enddatesame-field-view');"
                  id="parent-fieldname-endDate"
                  tal:attributes="class string:$kss_class dtend;
                          title python:context.end().ISO8601()"
                  i18n:name="endtime">
                  <span metal:define-slot="inside"
                      class="explain"
                      tal:content="python:toLocalizedTime(context.end(), time_only=1)">End Time</span>
                </abbr>
              </tal:sameday>
            </td>
          </tr>
          <tr tal:condition="context/getAttendees|nothing">
            <td class="attendees">
              <metal:field use-macro="python:context.widget('attendees', mode='view')">
                Attendees
              </metal:field>
            </td>
          </tr>
          <tr tal:condition="context/location">
            <td class="location">

              <metal:field use-macro="python:context.widget('location', mode='view')">
              Location
              </metal:field>
            </td>
          </tr>
          <tr>
            <td tal:define="here_url context/absolute_url;">
              <a href="#"
               tal:attributes="href string:$here_url/vcs_view"
               title="Download this concert date in vCal format"
               i18n:attributes="title title_add_to_vcal;">
                <span i18n:translate="label_add_to_vcal">vCal</span></a>
              <a href="#"
               tal:attributes="href string:$here_url/ics_view"
               title="Download this concert date in iCal format"
               i18n:attributes="title title_add_to_ical;">
                <span i18n:translate="label_add_to_ical">iCal</span></a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="documentDescription" tal:content="context/Description">
      Description
    </div>
    <metal:field use-macro="python:context.widget('text', mode='view')">
      Body text
    </metal:field>

  </body>
</html>
