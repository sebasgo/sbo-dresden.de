<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collage">

<body>

<div metal:fill-slot="main">
    <metal:main-macro define-macro="main">

        <div tal:define="view here/@@collage"
             id="collage" tal:attributes="class python:test(view.edit_mode(), 'edit', '')" >

	     <tal:block condition="view/isPlone2">
	       <div metal:use-macro="here/document_actions/macros/document_actions">
                 Document actions (print, sendto etc)
               </div>
	     </tal:block>

	     <tal:block condition="view/isPlone3">
	       <div tal:replace="structure provider:plone.abovecontenttitle" />
             </tal:block>

             <h1 tal:condition="here/getShowTitle|nothing"
		 class="documentFirstHeading"> 
               <metal:field use-macro="python:here.widget('title', mode='view')">
		 Title
               </metal:field>
             </h1>
	     
	     <tal:block condition="view/isPlone3">
               <div tal:replace="structure provider:plone.belowcontenttitle" />
             </tal:block>

            <tal:block condition="view/isPlone2">
              <div metal:use-macro="here/document_byline/macros/byline">
		Get the byline - contains details about author and modification date.
              </div>
	    </tal:block>
	    
	    <tal:description condition="here/getShowDescription|nothing">
	      <p class="documentDescription"
		 tal:content="here/Description"
		 tal:condition="here/Description">
                Description
              </p>
	    </tal:description>
	    
            <div metal:use-macro="here/document_relateditems/macros/relatedItems">
                show related items if they exist
            </div>

            <tal:block condition="view/isPlone3">
              <div tal:replace="structure provider:plone.abovecontentbody" />
	    </tal:block>
	    
	    <div tal:replace="structure here/@@renderer">
	      Collage content
            </div>
	    
	    <p tal:condition="view/edit_mode">
	      <span class="discreet"
		    i18n:translate="label_no_items_added"
		    tal:condition="not: here/folderlistingFolderContents">
                This Collage-object does not have any items yet. Add items using the drop-down menu to have them appear here.
              </span>

	      <form action="insert-row" tal:condition="view/edit_mode">
		<input type="submit" class="context"
		       i18n:attributes="value button_add_collagerow"
		       value="Add row" />
              </form>
	    </p>

	    <tal:block condition="view/isPlone3">
              <div tal:replace="structure provider:plone.belowcontentbody" />
	    </tal:block>

        </div>
    </metal:main-macro>
</div>

</body>
</html>
